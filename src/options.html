<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="theme-loader.js"></script>
  
    <title data-i18n="optionsTitle"></title>
    <style>
        /* --- Base styles --- */
        body { font-family: sans-serif; padding: 15px; }
        table#groupTable { width: 100%; border-collapse: collapse; margin-bottom: 15px; }
        th, td { border: 1px solid #ccc; padding: 8px; text-align: left; vertical-align: middle; }
        th { background-color: #f2f2f2; font-weight: bold; }
        input[type="text"] { width: 95%; padding: 5px; box-sizing: border-box; }
        input[type="checkbox"] { transform: scale(1.2); vertical-align: middle; }
        .includeCheckboxCell { width: 60px; text-align: center; }
        .includeStatus { width: 70px; font-style: italic; color: #555; }
        .deleteRow { width: 70px; text-align: center; }
        .deleteButton { padding: 3px 8px; background-color: #f44336; color: white; border: none; cursor: pointer; border-radius: 3px; }
        .deleteButton:hover { background-color: #da190b; }
        #addRowButton, #visibleSaveButton { /* Style the VISIBLE buttons */
            padding: 10px 15px; margin-right: 5px; cursor: pointer;
            border-radius: 4px; border: 1px solid #ccc; margin-top: 5px;
        }
        #addRowButton { background-color: #e7e7e7; color: black; }
        #visibleSaveButton { background-color: #4CAF50; color: white; border-color: #4CAF50; }
        #visibleSaveButton.yellow { background-color: #ffeb3b; color: black; border-color: #ffc107; font-weight: bold;}
        .drag-handle { width: 30px; cursor: move; text-align: center; user-select: none; font-size: 1.2em; color: #777; }
        select.roleSelect { padding: 4px; min-width: 90px; }
        #importFile { display: none; }

        /* --- Row Color Styles --- */
        table#groupTable tbody tr.admin-row td { background-color: #e8f5e9; }
        table#groupTable tbody tr.moderator-row td { background-color: #e3f2fd; }
        table#groupTable tbody tr.invalid-row td { background-color: lightcoral !important; }
        table#groupTable thead th { background-color: #f2f2f2; }
        /* --- End Row Color Styles --- */

        /* --- Layout Styles for Bottom Row --- */
        .bottom-controls-container { /* Wraps the 3 sections */
            display: flex;
            justify-content: space-between; /* Pushes left and right to edges */
            align-items: center; /* Vertically align items */
            gap: 20px; /* Space between items */
            padding-top: 20px;
            padding-bottom: 20px;
            border-top: 1px solid #ccc;
            margin-top: 15px; /* Space above this container */
            flex-wrap: wrap; /* Allow wrapping on very small screens */
        }

        .form-actions-left {
             order: 1; /* Leftmost item */
        }
        .form-actions-left p small { margin-top: 10px; display: block; }

        .donation-section-middle {
            order: 2; /* Middle item */
            text-align: center;
            padding: 0 10px;
        }
        .donation-section-middle h3 { margin-top: 0; margin-bottom: 5px; font-size: 1em; } /* Smaller heading */
        .donation-section-middle p { font-size: 0.85em; margin-bottom: 8px; color: #333; line-height: 1.3;}
        .donation-section-middle img { max-width: 80px; height: auto; border: 1px solid #ccc; margin-top: 5px; }
        .donation-section-middle .paypal-button { padding: 6px 12px; background-color: #0070ba; color: white; text-decoration: none; border-radius: 5px; font-size: 0.85em; display: inline-block; margin-bottom: 5px; }
        .donation-section-middle .disclaimer { font-size: 0.75em; margin-top: 5px; color: #777; }

        .io-section-right {
            order: 3; /* Rightmost item */
            padding: 15px;
            border-radius: 5px;
            min-width: 250px; /* Minimum width */
            text-align: left;
        }
        .io-section-right h2 { margin-top: 0; font-size: 1.1em; border-bottom: 1px solid #eee; padding-bottom: 5px; margin-bottom: 15px; }
        .io-section-right button { margin-right: 5px; margin-bottom: 10px; }
        .io-section-right p small { display: block; margin-top: 10px; }
        .sortable-ghost { opacity: 0.4; background-color: #eee !important; }
        
    </style>
    <!-- Libraries FIRST -->
    <script src="browser-polyfill.min.js"></script>
    <script src="Sortable.min.js"></script>
    <!-- Options script LAST -->
    <script src="options.js"></script>   
</head>
<body>
    <h1 data-i18n="optionsHeading"></h1>
    <p data-i18n="optionsDescription"></p>

    <form id="groupForm">
        <div class="main-content-area">
            <table id="groupTable">
                <thead>
                    <tr>
                        <th class="drag-handle"></th>
                        <th data-i18n="thStatus"></th>
                        <th data-i18n="thInclude"></th>
                        <th data-i18n="thGroupName"></th>
                        <th data-i18n="thNickname"></th>
                        <th data-i18n="thGroupID"></th>
                        <th data-i18n="thMyRole"></th>
                        <th data-i18n="thGroupURL"></th>
                        <th data-i18n="thAction"></th>
                    </tr>
                </thead>
                <tbody><!-- Rows are added by JS --></tbody>
            </table>
        </div>
        <button type="submit" id="saveButton" style="display: none;">Save (Hidden)</button>
    </form>

    <div class="bottom-controls-container">
         <div class="form-actions-left">
             <button type="button" id="addRowButton" data-i18n="addGroupButton"></button>
             <button type="button" id="visibleSaveButton" data-i18n="saveSettingsButton"></button>
             <p><small data-i18n="requiredFieldsNotice"></small></p>
         </div>

         <div class="donation-section-middle">
             <h3 data-i18n="donationHeading"></h3>
             <p data-i18n="donationText"></p>
             <div>
                 <a href="https://www.paypal.com/donate/?business=PXY7769HB3QWN&no_recurring=0&item_name=Thanks+for+the+support+or+appreciation+of+whichever+object%2Fcode%2Fetc+I%27ve+published.&currency_code=USD" target="_blank" rel="noopener noreferrer" class="paypal-button" data-i18n="donationButton"></a>
                 <br/>
                 <img src="icons/donate_qr.png" alt="PayPal QR Code" title="Scan for PayPal Donation" />
             </div>
             <p class="disclaimer" data-i18n="donationDisclaimer"></p>
         </div>

         <div class="io-section-right">
             <h2 data-i18n="ioHeading"></h2>
             <button type="button" id="exportButton" data-i18n="exportGroupsButton"></button>
             <button type="button" id="importButton" data-i18n="importGroupsButton"></button>
             <input type="file" id="importFile" accept=".json" />
             <p><small data-i18n="ioDescription"></small></p>
         </div>

    </div>
</body>
</html>